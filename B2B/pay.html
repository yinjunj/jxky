<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>同致相伴，一路顺畅</title>
    <link rel="icon" href="bulid/img/defaultLogo.png" type="image/x-icon"/>
    <link rel="stylesheet" href="bulid/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="bulid/css/login.css">
    <link rel="stylesheet" href="bulid/css/foot.css">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="bulid/css/base.css">
    <link rel="stylesheet" href="bulid/css/index.css">
    <link rel="stylesheet" href="bulid/css/brand.css">
    <link rel="stylesheet" href="bulid/css/pay.css">
    <link rel="stylesheet" href="bulid/css/pick-pcc.css">
    <link rel="stylesheet" href="bulid/css/jigsaw.css">
    <script src="bulid/js/hm.baidu.min.js"></script>
</head>
<body>
<!--内容-->
<div id="index" v-cloak class="container-fluid" style="padding: 0;color: #000;">
    <jxky-header></jxky-header>
    <!--导航-->
    <section style="margin-top: 31px;" class="dis_flex">
        <h1 style="margin: 0;cursor: pointer;display: inline-block;"><img onclick="window.location.href='index.html'"
                                                                          src="bulid/img/indexLogo.png" alt="logo"></h1>
        <div style="line-height: 147px">
            <img src="bulid/img/pay_order.jpg" alt="">
        </div>
    </section>
    <!--收货地址-->
    <section style="margin-top: 20px;">
        <div style="padding: 15px 40px;background: #DCDEDD;">
            <span style="display: inline-block;border-left: 4px solid #FF4502;color: #000;padding-left: 8px;">收货地址</span>
        </div>
        <div style="background: #F5F5F5;padding: 20px 40px;">
            <div class="cr">
                <div v-for="(item,ind) in adrArr" @click="sureClick($event,'adr')" class="sure paySure"
                     :class="{'active':!ind}">
                    <div class="borMid" style="padding: 5px;">姓名：{{item.user_name}}</div>
                    <div class="borMid" style="padding: 5px;" :title="item.province+item.city+item.area+item.address">
                        地址：{{item.province+item.city+item.area+item.address}}
                    </div>
                    <div style="padding: 5px;">电话：{{item.mobile}}</div>
                    <i></i>
                </div>
                <div data-toggle="modal" data-target="#myModal" @click="modelAdr" class="paySure"
                     style="height: 104px;width: 208px;text-align: center;line-height: 78px;color: #ddd;font-size: 6em;display: inline-block;">
                    +
                </div>
            </div>
        </div>
    </section>

    <!--配送方式-->
    <section style="margin-top: 20px;">
        <div style="padding: 15px 40px;background: #DCDEDD;">
            <span style="display: inline-block;border-left: 4px solid #FF4502;color: #000;padding-left: 8px;">配送方式</span>
        </div>
        <div style="background: #F5F5F5;padding: 20px 40px;" class="cr">
            <div @click="sureClick($event,'deliver')" class="sure paySure active" style="padding: 5px 40px;">送货上门<i></i></div>
            <div @click="sureClick($event,'deliver')" class="sure paySure" style="padding: 5px 40px;">到店自取<i></i></div>
        </div>
    </section>

    <!--商品清单-->
    <section style="margin-top: 20px;">
        <div style="padding: 15px 40px;background: #DCDEDD;">
            <span style="display: inline-block;border-left: 4px solid #FF4502;color: #000;padding-left: 8px;">商品清单</span>
        </div>
        <div>
            <table class="table">
                <thead>
                <tr>
                    <th width="40%">产品</th>
                    <th width="12%">产品单价</th>
                    <th width="12%">数量</th>
                    <th width="24%">促销信息</th>
                    <th width="12%">小计</th>
                </tr>
                </thead>
                <tbody v-for="(item,index1) in goodsPay">
                <tr style="font-size: 1.1em;border: none">
                    <td colspan="5" style="text-align: left;">
                        <span style="display: inline-block;color: #D5282C;margin-top: 5px;">{{item.shop_name}}</span>
                        <span style="font-size: .8em;color: #666" v-if="item.special_promotion!=''">（{{item.special_promotion}}）</span>
                    </td>
                </tr>
                <tr v-for="(it,index2) in item.data_child" style="border: 1px solid #ddd;">
                    <td style="text-align: left">
                        <div style="width: 100px;height: 100px;padding: 2px;overflow: hidden;display: inline-block;">
                            <img style="width: 100%;height: 100%;" :src="it.img_url" alt="">
                        </div>
                        <div style="display: inline-block;width: 350px;overflow: hidden;vertical-align: top;padding: 10px;">
                            <div style="height: 62px;overflow: hidden;">
                                <span class="hover_head" @click="vm.dorShopDetail(it.goods_id,'')">{{it.title}}</span>
                            </div>
                            <!--<div style="display: inline-block;" v-if="it.child_title!=''">-->
                                <!--<div style="display: inline-block;color: #aaa">促销信息 <span class="promoTitle"-->
                                                                                          <!--style="color: #fff;background: #D5282C;padding: 0 8px;">{{it.child_title}}</span>-->
                                <!--</div>-->
                                <!--<div class="promoZP"-->
                                     <!--style="border: 1px solid #D5282C;padding: 3px;display: inline-block;color: #D5282C"-->
                                     <!--v-if="it.gift&&it.gift.length!=0">-->
                                    <!--赠：-->
                                    <!--<span v-for="its in it.gift">-->
                                        <!--<img class="toolimg" :alt="its.zp_title"-->
                                              <!--:src="its.zp_pro_img"/>-->
                                        <!--<span>x{{its.zp_number}}</span>-->
                                    <!--</span>-->

                                <!--</div>-->

                            <!--</div>-->
                        </div>
                    </td>
                    <td>
                        <div class="sealPce" style="color: #D5282C;font-size: 1.3em;font-weight: bold">￥{{it.seal_price}}</div>
                        <div style="font-size: .8em;color: #ccc;text-decoration: line-through;">￥{{it.market_price}}
                        </div>
                    </td>
                    <td>{{it.number}}</td>
                    <td>
                        <select v-if="it.motion_id&&it.Promotion.length!=0"
                                @change="promoIndex($event,index1,index2,it.number,it.seal_price)" class="form-control"
                                style="color: #D5282C">
                            <!--<option value="">请选择促销方式</option>-->
                            <option :alt="itp.type" :zpType="itp.zp_type" v-if="it.motion_id==itp.id" :disabled="(itp.full_amount&&(it.seal_price*it.number)<itp.full_amount)||(itp.mzeng_number&&(itp.mzeng_number>it.number))||(itp.mzhe_number&&it.number<itp.mzhe_number)||(itp.mj_number&&it.number<itp.mj_number)||(itp.max_number&&parseInt(it.number)>parseInt(itp.max_number))||(itp.min_number&&parseInt(it.number)<parseInt(itp.min_number))"
                                    v-for="(itp,ind) in it.Promotion" :value="ind">{{itp.title}}
                            </option>
                            <option :alt="itp.type" :zpType="itp.zp_type" v-if="it.motion_id!=itp.id" :disabled="(itp.full_amount&&(it.seal_price*it.number)<itp.full_amount)||(itp.mzeng_number&&(itp.mzeng_number>it.number))||(itp.mzhe_number&&it.number<itp.mzhe_number)||(itp.mj_number&&it.number<itp.mj_number)||(itp.max_number&&parseInt(it.number)>parseInt(itp.max_number))||(itp.min_number&&parseInt(it.number)<parseInt(itp.min_number))"
                                    v-for="(itp,ind) in it.Promotion" :value="ind">{{itp.title}}
                            </option>
                        </select>
                        <select @change="promoZp($event,index1,index2)" class="form-control" style="color: #D5282C;margin-top: 7px" v-show="it.motion_type=='满赠'&&parseInt(it.number)>=parseInt(it.product_number)&&it.zp_type=='2'">
                            <option :value="its.id" v-for="its in it.gift" :title="its.zp_title">{{its.zp_title}}</option>
                        </select>
                    </td>
                    <td>
                        <div class="total" style="color: #D5282C;font-size: 1.3em;font-weight: bold">￥{{(it.seal_price*it.number-it.discount_amount).toFixed(2)}}</div>
                    </td>
                </tr>
                <tr style="border: 1px solid #ddd;border-top: none">
                    <td style="padding: 0;" colspan="3">
                        <div style="background: #EEE;padding: 15px 35px;width: 44%;">
                            <span style="display: inline-block;border-left: 4px solid #FF4502;color: #000;padding-left: 8px;">订单促销（不与商品促销重叠）</span>
                        </div>
                    </td>
                    <td>
                        <select class="form-control" style="color: #D5282C"></select>
                    </td>
                    <td></td>
                </tr>
                <tr style="border: 1px solid #ddd;border-top: none">
                    <td colspan="2" class="cr">
                        <div class="fl" style="margin-top: 10px;">
                            <div class="fl" style="text-align: right;width: 100px;padding-top: 6px;margin-right: 5px;">
                                优惠券：
                            </div>
                            <div class="fl">
                                <select class="form-control">
                                    <option value="">没有可使用的优惠券</option>
                                </select>
                            </div>
                        </div>
                        <div class="fl" style="margin-top: 5px;">
                            <div class="fl" style="text-align: right;width: 100px;padding-top: 10px;">
                                优惠码：
                            </div>
                            <div class="fl">
                                <div class="input-group" style="width: 200px;">
                                    <input type="text" class="form-control" placeholder="请输入优惠码"
                                           aria-describedby="sizing-addon4"><span class="input-group-addon hoverOpacity">确认</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td colspan="3">
                        <div class="cr" style="margin-top: 10px;">
                            <div class="fl" style="text-align: right;width: 100px;margin-right: 5px;padding-top: 23px;">
                                留言：
                            </div>
                            <div class="fl" style="width: 400px;">
                                <textarea class="form-control" v-model="message[index1]" rows="3"></textarea>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!--支付方式及其他-->
    <section style="margin-top: 20px;position: relative;padding-bottom: 80px">
        <div style="padding: 15px 40px;background: #DCDEDD;">
            <span style="display: inline-block;border-left: 4px solid #FF4502;color: #000;padding-left: 8px;">支付方式及其他</span>
        </div>
        <div style="padding: 15px 40px 100px;">
            <div class="cr" style="margin-top: 10px;">
                <div class="fl" style="text-align: right;width: 100px;padding-top: 8px;margin-right: 5px;">
                    支付方式：
                </div>
                <div class="fl">
                    <div @click="sureClick($event,'pay','zfb')" class="sure paySure active" style="width: 150px;text-align: center">
                        <i></i>
                        <span class="fa">
                            <img style="width: 20px;margin: 3px;" src="bulid/img/zhifubao.png" alt="">
                        </span>
                        支付宝支付
                    </div>
                    <div @click="sureClick($event,'pay','offlinepayment')" class="sure paySure" style="width: 150px;text-align: center">
                        <i></i>
                        <span class="fa">
                            <img style="width: 20px;margin: 3px;" src="bulid/img/dianpu.png" alt="">
                        </span>
                        货到付款
                    </div>
                    <!--<div @click="sureClick($event,'pay','offlinepayment')" class="sure paySure" style="width: 150px;text-align: center;padding: 7px;">-->
                        <!--<i></i>-->
                        <!--<span class="fa">-->
                            <!--<img style="width: 20px;margin: 3px;" src="bulid/img/xiny.png" alt="">-->
                        <!--</span>-->
                        <!--信用支付-->
                    <!--</div>-->
                    <div @click="sureClick($event,'pay','weixin')" class="sure paySure" style="width: 150px;text-align: center;padding: 8px;">
                        <i></i>
                        <span style="color:#77CE36;font-size: 1.2em" class="fa fa-weixin" aria-hidden="true"></span>
                        微信支付
                    </div>
                    <div @click="sureClick($event,'pay','UnionPay')" class="sure paySure" style="width: 150px;text-align: center">
                        <i></i>
                        <span class="fa">
                            <img style="width: 26px;" src="bulid/img/yinlian.png" alt="">
                        </span>
                        银联支付
                    </div>
                    <div @click="sureClick($event,'pay','Balance')" class="sure paySure" style="width: 150px;text-align: center;padding: 8px;">
                        <i></i>
                        <span style="color:#D5282C;font-size: 1.2em" class="fa fa-usd" aria-hidden="true"></span>
                        余额支付
                    </div>
                </div>
            </div>
            <div class="cr" style="margin-top: 10px;">
                <div class="fl" style="text-align: right;width: 100px;padding-top: 6px;margin-right: 5px;">
                    我的余额：
                </div>
                <div class="fl">
                    <div :class="balanShow?'active':''" class="sure paySure"
                         style="min-width: 150px;text-align: center;font-weight: bold;font-size: 1.2em">
                        ￥{{balance}}
                        <i></i>
                    </div>
                </div>
            </div>
        </div>
        <div style="position: absolute;bottom: 0px;right: 0;">
            <div style="width: 500px;border: 3px solid #f1f1f1;outline: 1px solid #ff4502;padding: 15px 40px; ">
                <div style="padding: 2px 0;">
                    <div style="display: inline-block;">
                        <div style="width: 100px;text-align: right;display: inline-block;">商品总金额：</div>
                        <div style="color: #D5282C;display: inline-block;padding-left: 15px;min-width: 90px;">￥{{totals.toFixed(2)}}</div>
                    </div>
                    <div style="display: inline-block;">
                        <div style="width: 100px;text-align: right;display: inline-block;">运费：</div>
                        <div style="color: #D5282C;display: inline-block;padding-left: 15px;min-width: 90px;">￥{{sendPrice.toFixed(2)}}
                        </div>
                    </div>
                </div>
                <div style="padding: 2px 0;">
                    <!--<div style="display: inline-block;">-->
                        <!--<div style="width: 100px;text-align: right;display: inline-block;">余额抵扣：</div>-->
                        <!--<div style="color: #D5282C;display: inline-block;padding-left: 15px;min-width: 90px;">-->
                            <!-- -￥{{jsBalance}}-->
                        <!--</div>-->
                    <!--</div>-->
                    <div style="display: inline-block;">
                        <div style="width: 100px;text-align: right;display: inline-block;">优惠券：</div>
                        <div style="color: #D5282C;display: inline-block;padding-left: 15px;min-width: 90px;">-￥0.00
                        </div>
                    </div>
                </div>
                <div class="cr" style="padding: 2px 0;">
                    <div class="fr" style="color: #D5282C;">
                        实付款：<span style="font-size: 2.2em;font-weight: bold">￥{{(totals+sendPrice).toFixed(2)}}</span>
                    </div>
                </div>
                <div style="text-align: right;padding: 2px 0;">配送至：{{adrAdr}}</div>
                <div style="text-align: right;padding: 2px 0;">收货人：{{adrName+' '+adrPhone}}</div>
            </div>
            <div @click="payClick" class="hoverOpacity"
                 style="background: #D5282C;color: #fff;padding: 10px 60px;display: inline-block;font-size: 1.5em;font-weight: bold;float: right;">
                提交订单
            </div>
        </div>
    </section>


    <!--添加收货人-->
    <div data-backdrop="static" data-keyboard="false" class="modal fade" id="myModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel">
        <div class="pa_tc" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">添加收货地址</h4>
                </div>
                <div class="modal-body" style="min-width: 680px">
                    <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon3">姓名</span>
                        <input type="text" class="form-control" v-model="vm.nameAdr" placeholder="请输入姓名"
                               aria-describedby="sizing-addon3">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon4">地址</span>
                        <span>
                            <span class="pick-area pick-area6" name=""></span>
                            <input type="text" class="pick-input" style="border-top: 1px solid #ddd;"
                                   v-model="vm.adrAdr" placeholder="请输入详细街道"/>
                        </span>
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon" id="sizing-addon5">电话</span>
                        <input type="text" class="form-control" v-model="vm.phoneAdr" placeholder="请输入电话号码"
                               onkeyup="this.value=this.value.replace(/[^0-9-]+/,'');" aria-describedby="sizing-addon4">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" @click="vm.addAdr" class="btn btn-primary">提交</button>
                </div>
            </div>
        </div>
    </div>
    <jxky-friend></jxky-friend>
    <div id="loginModel" class="dis_no">
        <jxky-login title="model"></jxky-login>
    </div>
    <!--foot-->
    <div id="foot">
        <jxky-foot></jxky-foot>
    </div>
</div>

<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
<!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
<!--[if lt IE 9]>
<script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="bulid/js/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script src="http://cdn.bootcss.com/bootstrap-hover-dropdown/2.0.10/bootstrap-hover-dropdown.min.js"></script>
<script src="vue/dist/vue.min.js"></script>
<script src="bulid/js/md5.min.js"></script>
<script src="bulid/js/jigsaw.js"></script>
<script src="bulid/js/pick-pcc.js"></script>
<script src="component/comp.min.js"></script>
<script src="bulid/layer/layer.min.js"></script>
<!--列表滚动-->
<script src="bulid/js/jquery.bootstrap.newsbox.min.js" type="text/javascript"></script>
<script src="bulid/src/pay.min.js"></script>
</body>
</html>