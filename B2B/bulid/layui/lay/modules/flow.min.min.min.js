layui.define("jquery",function(a){var c=layui.$,b=function(e){},d='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';b.prototype.load=function(l){var j,D,t,g,z=this,B=0;l=l||{};var k=c(l.elem);if(k[0]){var A=c(l.scrollElem||document),C=l.mb||50,E=!("isAuto" in l)||l.isAuto,x=l.end||"没有更多了",q=l.scrollElem&&l.scrollElem!==document,w="<cite>加载更多</cite>",e=c('<div class="layui-flow-more"><a href="javascript:;">'+w+"</a></div>");k.find(".layui-flow-more")[0]||k.append(e);var h=function(m,i){m=c(m),e.before(m),i=0==i||null,i?e.html(x):e.find("a").html(w),D=i,j=null,t&&t()},f=function(){j=!0,e.find("a").html(d),"function"==typeof l.done&&l.done(++B,h)};if(f(),e.find("a").on("click",function(){c(this);D||j||f()}),l.isLazyimg){var t=z.lazyimg({elem:l.elem+" img",scrollElem:l.scrollElem})}return E?(A.on("scroll",function(){var m=c(this),i=m.scrollTop();g&&clearTimeout(g),D||(g=setTimeout(function(){var o=q?m.height():c(window).height(),n=q?m.prop("scrollHeight"):document.documentElement.scrollHeight;n-i-o<=C&&(j||f())},100))}),z):z}},b.prototype.lazyimg=function(q){var h,f=this,l=0;q=q||{};var j=c(q.scrollElem||document),g=q.elem||"img",e=q.scrollElem&&q.scrollElem!==document,s=function(t,i){var m=j.scrollTop(),o=m+i,n=e?function(){return t.offset().top-j.offset().top+m}():t.offset().top;if(n>=m&&n<=o&&!t.attr("src")){var r=t.attr("lay-src");layui.img(r,function(){var v=f.lazyimg.elem.eq(l);t.attr("src",r).removeAttr("lay-src"),v[0]&&p(v),l++})}},p=function(n,r){var i=e?(r||j).height():c(window).height(),w=j.scrollTop(),t=w+i;if(f.lazyimg.elem=c(g),n){s(n,i)}else{for(var x=0;x<f.lazyimg.elem.length;x++){var m=f.lazyimg.elem.eq(x),o=e?function(){return m.offset().top-j.offset().top+w}():m.offset().top;if(s(m,i),l=x,o>t){break}}}};if(p(),!h){var k;j.on("scroll",function(){var i=c(this);k&&clearTimeout(k),k=setTimeout(function(){p(null,i)},50)}),h=!0}return p},a("flow",new b)});