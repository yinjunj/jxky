layui.define("jquery",function(g){var h=layui.$,b=layui.hint(),d="layui-tree-enter",f=function(a){this.options=a},c={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};f.prototype.init=function(a){var i=this;a.addClass("layui-box layui-tree"),i.options.skin&&a.addClass("layui-tree-skin-"+i.options.skin),i.tree(a),i.on(a)},f.prototype.tree=function(m,j){var k=this,l=k.options,o=j||l.nodes;layui.each(o,function(i,r){var e=r.children&&r.children.length>0,q=h('<ul class="'+(r.spread?"layui-show":"")+'"></ul>'),p=h(["<li "+(r.spread?'data-spread="'+r.spread+'"':"")+">",function(){return e?'<i class="layui-icon layui-tree-spread">'+(r.spread?c.arrow[1]:c.arrow[0])+"</i>":""}(),function(){return l.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===l.check?c.checkbox[0]:"radio"===l.check?c.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(r.href||"javascript:;")+'" '+(l.target&&r.href?'target="'+l.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(e?"branch":"leaf")+'">'+(e?r.spread?c.branch[1]:c.branch[0]:c.leaf)+"</i>")+("<cite>"+(r.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));e&&(p.append(q),k.tree(q,r.children)),m.append(p),"function"==typeof l.click&&k.click(p,r),k.spread(p,r),l.drag&&k.drag(p,r)})},f.prototype.click=function(l,m){var j=this,k=j.options;l.children("a").on("click",function(a){layui.stope(a),k.click(m)})},f.prototype.spread=function(q,s){var k=this,m=(k.options,q.children(".layui-tree-spread")),p=q.children("ul"),t=q.children("a"),j=function(){q.data("spread")?(q.data("spread",null),p.removeClass("layui-show"),m.html(c.arrow[0]),t.find(".layui-icon").html(c.branch[0])):(q.data("spread",!0),p.addClass("layui-show"),m.html(c.arrow[1]),t.find(".layui-icon").html(c.branch[1]))};p[0]&&(m.on("click",j),t.on("dblclick",j))},f.prototype.on=function(l){var i=this,k=i.options,j="layui-tree-drag";l.find("i").on("selectstart",function(a){return !1}),k.drag&&h(document).on("mousemove",function(o){var a=i.move;if(a.from){var m=(a.to,h('<div class="layui-box '+j+'"></div>'));o.preventDefault(),h("."+j)[0]||h("body").append(m);var p=h("."+j)[0]?h("."+j):m;p.addClass("layui-show").html(a.from.elem.children("a").html()),p.css({left:o.pageX+10,top:o.pageY+10})}}).on("mouseup",function(){var a=i.move;a.from&&(a.from.elem.children("a").removeClass(d),a.to&&a.to.elem.children("a").removeClass(d),i.move={},h("."+j).remove())})},f.prototype.move={},f.prototype.drag=function(l,i){var k=this,j=(k.options,l.children("a")),m=function(){var a=h(this),e=k.move;e.from&&(e.to={item:i,elem:l},a.addClass(d))};j.on("mousedown",function(){var a=k.move;a.from={item:i,elem:l}}),j.on("mouseenter",m).on("mousemove",m).on("mouseleave",function(){var o=h(this),n=k.move;n.from&&(delete n.to,o.removeClass(d))})},g("tree",function(k){var j=new f(k=k||{}),a=h(k.elem);return a[0]?void j.init(a):b.error("layui.tree 没有找到"+k.elem+"元素")})});