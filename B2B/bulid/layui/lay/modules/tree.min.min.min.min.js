layui.define("jquery",function(i){var e=layui.$,l=layui.hint(),k="layui-tree-enter",j=function(b){this.options=b},a={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};j.prototype.init=function(b){var c=this;b.addClass("layui-box layui-tree"),c.options.skin&&b.addClass("layui-tree-skin-"+c.options.skin),c.tree(b),c.on(b)},j.prototype.tree=function(b,f){var d=this,c=d.options,g=f||c.nodes;layui.each(g,function(o,h){var s=h.children&&h.children.length>0,m=e('<ul class="'+(h.spread?"layui-show":"")+'"></ul>'),n=e(["<li "+(h.spread?'data-spread="'+h.spread+'"':"")+">",function(){return s?'<i class="layui-icon layui-tree-spread">'+(h.spread?a.arrow[1]:a.arrow[0])+"</i>":""}(),function(){return c.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===c.check?a.checkbox[0]:"radio"===c.check?a.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(h.href||"javascript:;")+'" '+(c.target&&h.href?'target="'+c.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(s?"branch":"leaf")+'">'+(s?h.spread?a.branch[1]:a.branch[0]:a.leaf)+"</i>")+("<cite>"+(h.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));s&&(n.append(m),d.tree(m,h.children)),b.append(n),"function"==typeof c.click&&d.click(n,h),d.spread(n,h),c.drag&&d.drag(n,h)})},j.prototype.click=function(c,b){var f=this,d=f.options;c.children("a").on("click",function(g){layui.stope(g),d.click(b)})},j.prototype.spread=function(n,h){var b=this,d=(b.options,n.children(".layui-tree-spread")),c=n.children("ul"),g=n.children("a"),f=function(){n.data("spread")?(n.data("spread",null),c.removeClass("layui-show"),d.html(a.arrow[0]),g.find(".layui-icon").html(a.branch[0])):(n.data("spread",!0),c.addClass("layui-show"),d.html(a.arrow[1]),g.find(".layui-icon").html(a.branch[1]))};c[0]&&(d.on("click",f),g.on("dblclick",f))},j.prototype.on=function(b){var f=this,c=f.options,d="layui-tree-drag";b.find("i").on("selectstart",function(g){return !1}),c.drag&&e(document).on("mousemove",function(g){var n=f.move;if(n.from){var h=(n.to,e('<div class="layui-box '+d+'"></div>'));g.preventDefault(),e("."+d)[0]||e("body").append(h);var p=e("."+d)[0]?e("."+d):h;p.addClass("layui-show").html(n.from.elem.children("a").html()),p.css({left:g.pageX+10,top:g.pageY+10})}}).on("mouseup",function(){var g=f.move;g.from&&(g.from.elem.children("a").removeClass(k),g.to&&g.to.elem.children("a").removeClass(k),f.move={},e("."+d).remove())})},j.prototype.move={},j.prototype.drag=function(c,g){var d=this,f=(d.options,c.children("a")),b=function(){var m=e(this),h=d.move;h.from&&(h.to={item:g,elem:c},m.addClass(k))};f.on("mousedown",function(){var h=d.move;h.from={item:g,elem:c}}),f.on("mouseenter",b).on("mousemove",b).on("mouseleave",function(){var m=e(this),h=d.move;h.from&&(delete h.to,m.removeClass(k))})},i("tree",function(c){var d=new j(c=c||{}),b=e(c.elem);return b[0]?void d.init(b):l.error("layui.tree 没有找到"+c.elem+"元素")})});