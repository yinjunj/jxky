layui.define("jquery",function(i){var e=layui.$,a=layui.hint(),k="layui-tree-enter",j=function(b){this.options=b},l={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};j.prototype.init=function(b){var c=this;b.addClass("layui-box layui-tree"),c.options.skin&&b.addClass("layui-tree-skin-"+c.options.skin),c.tree(b),c.on(b)},j.prototype.tree=function(b,f){var d=this,c=d.options,g=f||c.nodes;layui.each(g,function(h,m){var s=m.children&&m.children.length>0,n=e('<ul class="'+(m.spread?"layui-show":"")+'"></ul>'),o=e(["<li "+(m.spread?'data-spread="'+m.spread+'"':"")+">",function(){return s?'<i class="layui-icon layui-tree-spread">'+(m.spread?l.arrow[1]:l.arrow[0])+"</i>":""}(),function(){return c.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===c.check?l.checkbox[0]:"radio"===c.check?l.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(m.href||"javascript:;")+'" '+(c.target&&m.href?'target="'+c.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(s?"branch":"leaf")+'">'+(s?m.spread?l.branch[1]:l.branch[0]:l.leaf)+"</i>")+("<cite>"+(m.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));s&&(o.append(n),d.tree(n,m.children)),b.append(o),"function"==typeof c.click&&d.click(o,m),d.spread(o,m),c.drag&&d.drag(o,m)})},j.prototype.click=function(c,b){var f=this,d=f.options;c.children("a").on("click",function(g){layui.stope(g),d.click(b)})},j.prototype.spread=function(h,g){var c=this,b=(c.options,h.children(".layui-tree-spread")),n=h.children("ul"),f=h.children("a"),d=function(){h.data("spread")?(h.data("spread",null),n.removeClass("layui-show"),b.html(l.arrow[0]),f.find(".layui-icon").html(l.branch[0])):(h.data("spread",!0),n.addClass("layui-show"),b.html(l.arrow[1]),f.find(".layui-icon").html(l.branch[1]))};n[0]&&(b.on("click",d),f.on("dblclick",d))},j.prototype.on=function(b){var f=this,c=f.options,d="layui-tree-drag";b.find("i").on("selectstart",function(g){return !1}),c.drag&&e(document).on("mousemove",function(q){var h=f.move;if(h.from){var g=(h.to,e('<div class="layui-box '+d+'"></div>'));q.preventDefault(),e("."+d)[0]||e("body").append(g);var n=e("."+d)[0]?e("."+d):g;n.addClass("layui-show").html(h.from.elem.children("a").html()),n.css({left:q.pageX+10,top:q.pageY+10})}}).on("mouseup",function(){var g=f.move;g.from&&(g.from.elem.children("a").removeClass(k),g.to&&g.to.elem.children("a").removeClass(k),f.move={},e("."+d).remove())})},j.prototype.move={},j.prototype.drag=function(c,g){var d=this,f=(d.options,c.children("a")),b=function(){var h=e(this),m=d.move;m.from&&(m.to={item:g,elem:c},h.addClass(k))};f.on("mousedown",function(){var h=d.move;h.from={item:g,elem:c}}),f.on("mouseenter",b).on("mousemove",b).on("mouseleave",function(){var h=e(this),m=d.move;m.from&&(delete m.to,h.removeClass(k))})},i("tree",function(c){var d=new j(c=c||{}),b=e(c.elem);return b[0]?void d.init(b):a.error("layui.tree 没有找到"+c.elem+"元素")})});