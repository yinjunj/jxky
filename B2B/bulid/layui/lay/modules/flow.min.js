layui.define("jquery",function(c){var a=layui.$,d=function(f){},b='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';d.prototype.load=function(B){var l,w,q,j,F=this,D=0;B=B||{};var A=a(B.elem);if(A[0]){var t=a(B.scrollElem||document),H=B.mb||50,I=!("isAuto" in B)||B.isAuto,G=B.end||"没有更多了",E=B.scrollElem&&B.scrollElem!==document,C="<cite>加载更多</cite>",x=a('<div class="layui-flow-more"><a href="javascript:;">'+C+"</a></div>");A.find(".layui-flow-more")[0]||A.append(x);var k=function(g,f){g=a(g),x.before(g),f=0==f||null,f?x.html(G):x.find("a").html(C),w=f,l=null,q&&q()},z=function(){l=!0,x.find("a").html(b),"function"==typeof B.done&&B.done(++D,k)};if(z(),x.find("a").on("click",function(){a(this);w||l||z()}),B.isLazyimg){var q=F.lazyimg({elem:B.elem+" img",scrollElem:B.scrollElem})}return I?(t.on("scroll",function(){var g=a(this),f=g.scrollTop();j&&clearTimeout(j),w||(j=setTimeout(function(){var e=E?g.height():a(window).height(),h=E?g.prop("scrollHeight"):document.documentElement.scrollHeight;h-f-e<=H&&(l||z())},100))}),F):F}},d.prototype.lazyimg=function(q){var h,v=this,l=0;q=q||{};var j=a(q.scrollElem||document),g=q.elem||"img",u=q.scrollElem&&q.scrollElem!==document,s=function(t,i){var w=j.scrollTop(),n=w+i,x=u?function(){return t.offset().top-j.offset().top+w}():t.offset().top;if(x>=w&&x<=n&&!t.attr("src")){var f=t.attr("lay-src");layui.img(f,function(){var e=v.lazyimg.elem.eq(l);t.attr("src",f).removeAttr("lay-src"),e[0]&&p(e),l++})}},p=function(x,z){var w=u?(z||j).height():a(window).height(),i=j.scrollTop(),r=i+w;if(v.lazyimg.elem=a(g),x){s(x,w)}else{for(var t=0;t<v.lazyimg.elem.length;t++){var n=v.lazyimg.elem.eq(t),A=u?function(){return n.offset().top-j.offset().top+i}():n.offset().top;if(s(n,w),l=t,A>r){break}}}};if(p(),!h){var k;j.on("scroll",function(){var f=a(this);k&&clearTimeout(k),k=setTimeout(function(){p(null,f)},50)}),h=!0}return p},c("flow",new d)});