layui.define("jquery",function(h){var f=layui.$,g=function(a){},e='<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>';g.prototype.load=function(d){var m,u,c,o,K=this,a=0;d=d||{};var i=f(d.elem);if(i[0]){var J=f(d.scrollElem||document),v=d.mb||50,s=!("isAuto" in d)||d.isAuto,y=d.end||"没有更多了",L=d.scrollElem&&d.scrollElem!==document,b="<cite>加载更多</cite>",r=f('<div class="layui-flow-more"><a href="javascript:;">'+b+"</a></div>");i.find(".layui-flow-more")[0]||i.append(r);var n=function(j,k){j=f(j),r.before(j),k=0==k||null,k?r.html(y):r.find("a").html(b),u=k,m=null,c&&c()},p=function(){m=!0,r.find("a").html(e),"function"==typeof d.done&&d.done(++a,n)};if(p(),r.find("a").on("click",function(){f(this);u||m||p()}),d.isLazyimg){var c=K.lazyimg({elem:d.elem+" img",scrollElem:d.scrollElem})}return s?(J.on("scroll",function(){var j=f(this),k=j.scrollTop();o&&clearTimeout(o),u||(o=setTimeout(function(){var q=L?j.height():f(window).height(),l=L?j.prop("scrollHeight"):document.documentElement.scrollHeight;l-k-q<=v&&(m||p())},100))}),K):K}},g.prototype.lazyimg=function(a){var m,o=this,c=0;a=a||{};var i=f(a.scrollElem||document),n=a.elem||"img",r=a.scrollElem&&a.scrollElem!==document,t=function(p,l){var k=i.scrollTop(),s=k+l,j=r?function(){return p.offset().top-i.offset().top+k}():p.offset().top;if(j>=k&&j<=s&&!p.attr("src")){var q=p.attr("lay-src");layui.img(q,function(){var u=o.lazyimg.elem.eq(c);p.attr("src",q).removeAttr("lay-src"),u[0]&&b(u),c++})}},b=function(k,u){var l=r?(u||i).height():f(window).height(),q=i.scrollTop(),s=q+l;if(o.lazyimg.elem=f(n),k){t(k,l)}else{for(var p=0;p<o.lazyimg.elem.length;p++){var v=o.lazyimg.elem.eq(p),j=r?function(){return v.offset().top-i.offset().top+q}():v.offset().top;if(t(v,l),c=p,j>s){break}}}};if(b(),!m){var d;i.on("scroll",function(){var j=f(this);d&&clearTimeout(d),d=setTimeout(function(){b(null,j)},50)}),m=!0}return b},h("flow",new g)});