layui.define("jquery",function(g){var h=layui.$,c=layui.hint(),d="layui-tree-enter",f=function(a){this.options=a},b={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};f.prototype.init=function(a){var e=this;a.addClass("layui-box layui-tree"),e.options.skin&&a.addClass("layui-tree-skin-"+e.options.skin),e.tree(a),e.on(a)},f.prototype.tree=function(a,i){var j=this,k=j.options,e=i||k.nodes;layui.each(e,function(q,l){var p=l.children&&l.children.length>0,t=h('<ul class="'+(l.spread?"layui-show":"")+'"></ul>'),r=h(["<li "+(l.spread?'data-spread="'+l.spread+'"':"")+">",function(){return p?'<i class="layui-icon layui-tree-spread">'+(l.spread?b.arrow[1]:b.arrow[0])+"</i>":""}(),function(){return k.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===k.check?b.checkbox[0]:"radio"===k.check?b.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(l.href||"javascript:;")+'" '+(k.target&&l.href?'target="'+k.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(p?"branch":"leaf")+'">'+(p?l.spread?b.branch[1]:b.branch[0]:b.leaf)+"</i>")+("<cite>"+(l.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));p&&(r.append(t),j.tree(t,l.children)),a.append(r),"function"==typeof k.click&&j.click(r,l),j.spread(r,l),k.drag&&j.drag(r,l)})},f.prototype.click=function(j,a){var e=this,i=e.options;j.children("a").on("click",function(k){layui.stope(k),i.click(a)})},f.prototype.spread=function(e,i){var m=this,a=(m.options,e.children(".layui-tree-spread")),l=e.children("ul"),j=e.children("a"),k=function(){e.data("spread")?(e.data("spread",null),l.removeClass("layui-show"),a.html(b.arrow[0]),j.find(".layui-icon").html(b.branch[0])):(e.data("spread",!0),l.addClass("layui-show"),a.html(b.arrow[1]),j.find(".layui-icon").html(b.branch[1]))};l[0]&&(a.on("click",k),j.on("dblclick",k))},f.prototype.on=function(a){var e=this,j=e.options,i="layui-tree-drag";a.find("i").on("selectstart",function(k){return !1}),j.drag&&h(document).on("mousemove",function(m){var k=e.move;if(k.from){var l=(k.to,h('<div class="layui-box '+i+'"></div>'));m.preventDefault(),h("."+i)[0]||h("body").append(l);var o=h("."+i)[0]?h("."+i):l;o.addClass("layui-show").html(k.from.elem.children("a").html()),o.css({left:m.pageX+10,top:m.pageY+10})}}).on("mouseup",function(){var k=e.move;k.from&&(k.from.elem.children("a").removeClass(d),k.to&&k.to.elem.children("a").removeClass(d),e.move={},h("."+i).remove())})},f.prototype.move={},f.prototype.drag=function(k,e){var j=this,i=(j.options,k.children("a")),a=function(){var n=h(this),l=j.move;l.from&&(l.to={item:e,elem:k},n.addClass(d))};i.on("mousedown",function(){var l=j.move;l.from={item:e,elem:k}}),i.on("mouseenter",a).on("mousemove",a).on("mouseleave",function(){var n=h(this),l=j.move;l.from&&(delete l.to,n.removeClass(d))})},g("tree",function(i){var e=new f(i=i||{}),a=h(i.elem);return a[0]?void e.init(a):c.error("layui.tree 没有找到"+i.elem+"元素")})});